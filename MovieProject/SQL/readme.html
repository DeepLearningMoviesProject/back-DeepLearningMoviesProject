<h1>Readme</h1>


<h2><b>Pour utiliser MySql :</b></h2>
<b>Ubuntu :</b> <br><br>
<li>sudo apt-get install mysql-server</li><br>
<li>sudo pip install mysql</li><br>
<li>sudo pip install mysql-connector</li><br> 

<h2><b>Pour utiliser Docker :</b></h2>
Mettre dans le dossier /Docker/ le fichier <b>glove.6B.50d.txt</b>

<h2><b> A savoir:</b></h2>
Pour la structure de la BDD, j'ai fait exactement ce qu'on avait dessiné au tableau.<br>
De plus, le fonctionnement est actuellement prévu pour un localhost, sinon il faudra juste changer le mode de connexion et l'emplacement des fichiers SQL. 

<b><h2>Structure des fichiers:</b></h2>
J'ai fait un dossier SQL comportant tout les fichiers liés au SQL. La base de données sera sauvegardé dans un fichier SQL qui se trouvera dans ressources. Actuellement, j'ai fait un dossier ressources dans le dossier SQL car je ne sais pas si on va dissocier l'endroit de stockage des ressources pour le deep learning et celles pour le SQL. Il faudra en discuter (est-ce qu'on fait un dossier avec tout ce qui est lié au SQL ? Est-ce qu'on met l'API de SQL au même niveau que l'API TMDB ? etc...).<br><br>

<li><b><i>MovieProject/SQL/API/apiSQL.py</i></b>: Comporte TOUT ce qui est nécessaire pour faire des requêtes à la BDD.</li><br>
<li><b><i>MovieProject/SQL/API/user.py</i></b>: Classe User pour stocker les informations des utilisateurs de la BDD</li><br>
<li><i><b>MovieProject/SQL/Examples/exampleSQL.py</i></b>: Comporte des exemples que j'ai essayé de faire le plus clair possible pour que vous comprenniez comment utiliser l'API.</li><br>
<li><i><b>MovieProject/SQL/Ressources/bdd.sql</i></b>: Données (tables + inserts) de la base de données SQL.</li>


<b><h2>Comment utiliser la base de données MySQL:</b></h2>
Je vais expliquer en partant du principe que vous <b>vous ne vous êtes jamais servi de MySQL</b>.<br><br>
Lorsqu'on lance MySQL, <b>il faut avoir une BDD</b>. Il faut <b>tout d'abord la créer et la définir comme BDD actuelle</b> (car on peut en avoir plusieurs).
Une fois qu'on utilise la BDD, on peut ajouter nos tables et nos données dedans. Mais il faut savoir qu'en théorie, on n'est pas sencé stopper la BDD. Hors quand on quitte MySQL, on va arrêter le serveur qui fait tourner la BDD et donc <b>on va perdre tout ce qu'on a mis dedans</b>.<br><br>
<b>Comment palier à ce problème ?</b> Et bien c'est simple, <b>on doit exporter et sauvegarder ce qu'on a mis dans la BDD</b>. Et donc la prochaine fois qu'on relance MySQL et notre BDD, il suffit de recharger le fichier comportant toutes les données de notre BDD !<br><br>

<i><b>Pour résumer:</i></b><br><br>
<li><b>La première fois:</b> Il vous faudra créer une BDD (une fonction de l'API s'en occupe)</li><br>
<li><b>A chaque fois:</b> Il vous faudra importer les données de la BDD et les exporter à le fin du programme.</li><br><br>
Voir fichier<b> Examples/exampleSQL.py</b>
<b><h2>Dans notre cas:</h2></b>
Il faut savoir que l'API a été conçue de telle manière que vous n'ayez normalement jamais à écrire de requêtes MYSQL ou SQL. Il vous suffira d'appeler une fonction qui automatisera tout le processuce de ce que vous souhaitez faire. Que cela soit au niveau du processus d'initialisation de la base de données, de sa sauvegarde ou de son chargement, et même des requêtes SQL !<br><br>
Si vous regardez l'API, elle est assez conséquente même si toutes les fonctions sont documentées. Normalement, vous n'aurez à regarder que les premières fonctions de l'API, celles conçernant les chargements et sauvegardes de la BDD et celles conçernant les requêtes utilisateurs de la base USER. Tout le reste est automatisé.<br><br>

<b>Par exemple:</b><br><br>
Si vous créez un utilisateur avec une liste de films, l'API se chargera de créer l'utilisateur, de créer les films si ils ne sont pas encore dans la base de données et de faire les liens entre l'utilisateur et les films.<br>
De la même manière, si l'utilisateur met à jour ses goûts de films, vous n'avez pas à faire attention si les films existent ou pas dans la base de données, l'API s'en occupera.
<br>	<br>
Sinon, j'ai essayé de faire des fonctions pouvant pallier à tout vos besoins au niveau de la BDD, donc pensez à bien regarder l'API si vous avez besoin d'un truc non conventionnel, normalement tout est dedans (update, select, remove etc...).<br><br><br>

Enfin si malgrès tout vous décidez de lire toute l'API, elle est structurée de la manière suivante: <br><br>
<li><i><b>1: Gestion de la BDD</i></b></li><br>
<li><i><b>2: Requêtes liées à l'utilisateur</i></b></li><br>
<li><i><b>3: Requêtes liées aux films</i></b></li><br>
<li><i><b>4: Requêtes liées aux USERMOVIES (là où on stock l'avis d'un utilisateur pour un film)</i></li></b>

<b><h2>Ce qu'il reste à faire</h2></b>
<li>Tester sur Mac</li><br>
<li>Les mots de passe sont actuellements stockés en brut, il faudra voir pour faire ça plus proprement. Je pense faire quand je rentrerai une classe encodage/décodage qui s'occupera de ça avant de les sauvegarder dans la base SQL (même si à mon avis il faut encoder et décoder au dernier moment pour des raisons de sécurité, dans le front dès qu'on récupère le mot de passe de l'utilisateur).</li><br>
<li> Actuellement, il y a un problème de ports pour se connecter en utilisant MySQL à une BDD avec Docker. Il faut regarder comment faire cela (j'ai vu qu'il y un tuto pour utiliser MySQL pour Docker sur le site officiel de MySQL).</li> <br> <br>
Voilà, pavé Césard, ceux qui n'ont pas lu te saluent ! J'espère que j'ai été clair même si c'est pas très conçis :p Et hésitez pas à me faire part de vos remarques ou questions, y'a peut-être 2-3 erreurs, désolé d'avance !<br><br>
